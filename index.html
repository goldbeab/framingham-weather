
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Framingham Weather Forecast - Live</title>
    <style>
        body {{ font-family: sans-serif; background: #f0f4f8; padding: 20px; }}
        .container {{ max-width: 900px; margin: auto; background: white; padding: 20px; border-radius: 10px; }}
        .forecast-grid {{ display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; }}
        .day-card {{ background: #e3f2fd; border-radius: 10px; padding: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }}
        .temp-high {{ color: #e53935; font-weight: bold; }}
    </style>
</head>
<body>
    <div class="container">
        <h1>üìç Framingham Weather Forecast</h1>
        <p><strong>Last Updated:</strong> <span id="lastUpdated">Loading...</span></p>
        <div class="forecast-grid"><!-- Forecast cards will be inserted here --></div>
    </div>

    <script>
        function updateTimestamp() {{
            const now = new Date();
            document.getElementById('lastUpdated').textContent = now.toLocaleString();
        }}

        async function loadForecast() {{
            const forecastGrid = document.querySelector('.forecast-grid');
            if (!forecastGrid) return;

            try {{
                const resp = await fetch("https://corsproxy.io/?https://forecast.weather.gov/MapClick.php?lat=42.3168&lon=-71.429&FcstType=json");
                const data = await resp.json();
                const periods = data.time.startPeriodName.slice(0, 5); // 5 periods
                const temps = data.data.temperature;
                const descriptions = data.data.text;
                const winds = data.data.windSpeed;
                const precipChances = data.data.pop;

                forecastGrid.innerHTML = '';

                for (let i = 0; i < 5; i++) {{
                    const card = document.createElement('div');
                    card.className = 'day-card';
                    card.innerHTML = `
                        <h3>${{periods[i]}}</h3>
                        <div class="temp-range">
                            Temp: <span class="temp-high">${{temps[i]}}¬∞F</span>
                        </div>
                        <p><strong>Conditions:</strong> ${{descriptions[i]}}</p>
                        <p><strong>Wind:</strong> ${{winds[i]}}</p>
                        <p><strong>Precipitation:</strong> ${{precipChances[i] != null ? precipChances[i] + '%' : 'N/A'}}</p>
                    `;
                    forecastGrid.appendChild(card);
                }}

            }} catch (error) {{
                console.error('Error fetching forecast JSON:', error);
                forecastGrid.innerHTML = '<p style="color: red;">‚ö†Ô∏è Failed to load weather data.</p>';
            }}
        }}

        document.addEventListener('DOMContentLoaded', () => {{
            updateTimestamp();
            loadForecast();
        }});
    </script>
</body>
</html>
